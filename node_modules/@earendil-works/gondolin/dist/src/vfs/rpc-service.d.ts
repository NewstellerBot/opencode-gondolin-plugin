import type { VirtualProvider } from "./node";
import type { FsRequest, FsResponse } from "../virtio-protocol";
export declare const MAX_RPC_DATA: number;
export type FsRpcMetrics = {
    requests: number;
    errors: number;
    bytesRead: number;
    bytesWritten: number;
    ops: Record<string, number>;
};
export type FsRpcServiceOptions = {
    logger?: (message: string) => void;
};
export declare class FsRpcService {
    private readonly provider;
    private nextIno;
    private nextHandle;
    private readonly pathToIno;
    private readonly inoToPath;
    private readonly handles;
    private readonly logger?;
    readonly metrics: FsRpcMetrics;
    constructor(provider: VirtualProvider, options?: FsRpcServiceOptions);
    handleRequest(message: FsRequest): Promise<FsResponse>;
    close(): Promise<void>;
    private dispatch;
    private handleLookup;
    private handleGetattr;
    private handleReaddir;
    private handleOpen;
    private handleRead;
    private handleWrite;
    private handleCreate;
    private handleMkdir;
    private handleUnlink;
    private handleRename;
    private handleTruncate;
    private handleRelease;
    private truncatePath;
    private record;
    private ensureIno;
    private requirePath;
    private allocateHandle;
    private getHandle;
    private removeMapping;
    private renameMapping;
}
//# sourceMappingURL=rpc-service.d.ts.map
export declare const MAX_FRAME: number;
export type ExecOutput = {
    v: number;
    t: "exec_output";
    id: number;
    p: {
        stream: "stdout" | "stderr";
        data: Buffer;
    };
};
export type ExecResponse = {
    v: number;
    t: "exec_response";
    id: number;
    p: {
        exit_code: number;
        signal?: number;
    };
};
export type ErrorResponse = {
    v: number;
    t: "error";
    id: number;
    p: {
        code: string;
        message: string;
    };
};
export type FsRequest = {
    v: number;
    t: "fs_request";
    id: number;
    p: {
        op: string;
        req: Record<string, unknown>;
    };
};
export type FsResponse = {
    v: number;
    t: "fs_response";
    id: number;
    p: {
        op: string;
        err: number;
        res?: Record<string, unknown>;
        message?: string;
    };
};
export type IncomingMessage = ExecOutput | ExecResponse | ErrorResponse | FsRequest | FsResponse;
export type ExecRequest = {
    v: number;
    t: "exec_request";
    id: number;
    p: {
        cmd: string;
        argv?: string[];
        env?: string[];
        cwd?: string;
        stdin?: boolean;
        pty?: boolean;
    };
};
export type StdinData = {
    v: number;
    t: "stdin_data";
    id: number;
    p: {
        data: Buffer;
        eof?: boolean;
    };
};
export type PtyResize = {
    v: number;
    t: "pty_resize";
    id: number;
    p: {
        rows: number;
        cols: number;
    };
};
export declare class FrameReader {
    private buffer;
    private expectedLength;
    push(chunk: Buffer, onFrame: (frame: Buffer) => void): void;
}
export declare function normalize(value: unknown): unknown;
export declare function decodeMessage(frame: Buffer): IncomingMessage;
export declare function buildExecRequest(id: number, payload: ExecRequest["p"]): ExecRequest;
export declare function buildStdinData(id: number, data: Buffer, eof?: boolean): StdinData;
export declare function buildPtyResize(id: number, rows: number, cols: number): PtyResize;
export declare function encodeFrame(message: object): Buffer;
//# sourceMappingURL=virtio-protocol.d.ts.map